---
const {
  title,
  description,
  pubDate,
  updatedDate,
  heroImage,
  author,
  category,
  slug,
} = Astro.props;

const canonicalURL = `https://videovigilancia.gruposaom.com.mx/blog/${slug}/`;
const formattedDate = new Date(pubDate).toLocaleDateString('es-MX', {
  year: 'numeric',
  month: 'long',
  day: 'numeric',
});
const formattedUpdated = updatedDate
  ? new Date(updatedDate).toLocaleDateString('es-MX', {
      year: 'numeric',
      month: 'long',
      day: 'numeric',
    })
  : null;

import '@fortawesome/fontawesome-svg-core/styles.css';
import { config } from '@fortawesome/fontawesome-svg-core';
config.autoAddCss = false;
---

<!DOCTYPE html>
<html lang="es-MX">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>{title} | Blog Grupo SAOM</title>

  <!-- SEO -->
  <meta name="robots" content="index, follow" />
  <meta name="description" content={description} />
  <meta name="author" content={author} />

  <!-- Open Graph -->
  <meta property="og:title" content={title} />
  <meta property="og:description" content={description} />
  <meta property="og:image" content={heroImage ? `https://videovigilancia.gruposaom.com.mx${heroImage}` : 'https://videovigilancia.gruposaom.com.mx/og-image.jpg'} />
  <meta property="og:url" content={canonicalURL} />
  <meta property="og:type" content="article" />
  <meta property="og:locale" content="es_MX" />
  <meta property="article:published_time" content={new Date(pubDate).toISOString()} />
  {updatedDate && <meta property="article:modified_time" content={new Date(updatedDate).toISOString()} />}
  <meta property="article:author" content={author} />
  <meta property="article:section" content={category} />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content={title} />
  <meta name="twitter:description" content={description} />
  <meta name="twitter:image" content={heroImage ? `https://videovigilancia.gruposaom.com.mx${heroImage}` : 'https://videovigilancia.gruposaom.com.mx/og-image.jpg'} />

  <!-- Canonical -->
  <link rel="canonical" href={canonicalURL} />
  <link rel="alternate" hreflang="es-mx" href={canonicalURL} />

  <!-- Favicon -->
  <link rel="icon" href="/favicon.ico" type="image/x-icon" />

  <!-- Font preload -->
  <link rel="preload" href="/fonts/DMSans-Regular.ttf" as="font" type="font/ttf" crossorigin />

  <!-- Google Tag Manager -->
  <script is:inline>
    (function (w, d, s, l, i) {
      w[l] = w[l] || [];
      w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
      var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != "dataLayer" ? "&l=" + l : "";
      j.async = true;
      j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
      f.parentNode.insertBefore(j, f);
    })(window, document, "script", "dataLayer", "GTM-PSJ9FZVJ");
  </script>

  <!-- Schema.org Article JSON-LD -->
  <script type="application/ld+json" is:inline set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": title,
    "description": description,
    "image": heroImage ? `https://videovigilancia.gruposaom.com.mx${heroImage}` : "https://videovigilancia.gruposaom.com.mx/og-image.jpg",
    "author": {
      "@type": "Organization",
      "name": author,
      "url": "https://videovigilancia.gruposaom.com.mx/"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Grupo SAOM",
      "logo": {
        "@type": "ImageObject",
        "url": "https://videovigilancia.gruposaom.com.mx/favicon.ico"
      }
    },
    "datePublished": new Date(pubDate).toISOString(),
    "dateModified": updatedDate ? new Date(updatedDate).toISOString() : new Date(pubDate).toISOString(),
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": canonicalURL
    }
  })}></script>

  <!-- Breadcrumb Schema -->
  <script type="application/ld+json" is:inline set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      { "@type": "ListItem", "position": 1, "name": "Inicio", "item": "https://videovigilancia.gruposaom.com.mx/" },
      { "@type": "ListItem", "position": 2, "name": "Blog", "item": "https://videovigilancia.gruposaom.com.mx/blog/" },
      { "@type": "ListItem", "position": 3, "name": title, "item": canonicalURL }
    ]
  })}></script>

  <style>
    :root {
      --blog-primary: #0284c7;
      --blog-primary-dark: #0369a1;
      --blog-bg: #ffffff;
      --blog-surface: #f8fafc;
      --blog-surface-light: #f1f5f9;
      --blog-text: #1e293b;
      --blog-text-muted: #64748b;
      --blog-border: #e2e8f0;
      --blog-accent: #d97706;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--blog-bg);
      color: var(--blog-text);
      line-height: 1.7;
    }

    /* ‚îÄ‚îÄ Header Bar ‚îÄ‚îÄ */
    .blog-header {
      position: sticky;
      top: 0;
      z-index: 100;
      background: rgba(255, 255, 255, 0.92);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--blog-border);
      padding: 0.75rem 1.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
    }
    .blog-header .logo-link {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      text-decoration: none;
      color: var(--blog-text);
      font-weight: 700;
      font-size: 1rem;
    }
    .blog-header .logo-link .brand-dot {
      width: 8px; height: 8px;
      background: var(--blog-primary);
      border-radius: 50%;
      display: inline-block;
    }
    .blog-header nav { display: flex; gap: 1rem; align-items: center; flex-wrap: wrap; }
    .blog-header nav a {
      color: var(--blog-text-muted);
      text-decoration: none;
      font-size: 0.875rem;
      transition: color 0.2s;
    }
    .blog-header nav a:hover { color: var(--blog-text); }
    .blog-header .cta-btn {
      background: var(--blog-primary);
      color: #fff !important;
      padding: 0.4rem 1rem;
      border-radius: 6px;
      font-size: 0.8rem;
      font-weight: 600;
      transition: background 0.2s, transform 0.15s;
    }
    .blog-header .cta-btn:hover { background: var(--blog-primary-dark) !important; transform: translateY(-1px); }

    /* ‚îÄ‚îÄ Hero del art√≠culo ‚îÄ‚îÄ */
    .article-hero {
      background: linear-gradient(135deg, #f0f9ff 0%, #ffffff 100%);
      border-bottom: 1px solid var(--blog-border);
      padding: 3rem 1.5rem 2.5rem;
    }
    .article-hero-img {
      margin: 1.5rem 0;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 8px 24px rgba(0,0,0,0.08);
      border: 1px solid var(--blog-border);
    }
    .article-hero-img img {
      width: 100%;
      height: auto;
      display: block;
      aspect-ratio: 16/9;
      object-fit: cover;
    }
    .article-hero-inner {
      max-width: 760px;
      margin: 0 auto;
    }
    .breadcrumb {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      font-size: 0.8rem;
      color: var(--blog-text-muted);
      margin-bottom: 1.25rem;
      flex-wrap: wrap;
    }
    .breadcrumb a { color: var(--blog-primary); text-decoration: none; }
    .breadcrumb a:hover { text-decoration: underline; }
    .breadcrumb span { color: var(--blog-text-muted); }

    .article-category {
      display: inline-block;
      background: rgba(14, 165, 233, 0.15);
      color: var(--blog-primary);
      border: 1px solid rgba(14, 165, 233, 0.3);
      font-size: 0.75rem;
      font-weight: 600;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      padding: 0.25rem 0.75rem;
      border-radius: 99px;
      margin-bottom: 1rem;
    }

    .article-hero h1 {
      font-size: clamp(1.6rem, 4vw, 2.4rem);
      font-weight: 800;
      line-height: 1.25;
      color: var(--blog-text);
      margin-bottom: 1rem;
    }
    .article-hero .excerpt {
      font-size: 1.05rem;
      color: var(--blog-text-muted);
      margin-bottom: 1.5rem;
    }
    .article-meta {
      display: flex;
      align-items: center;
      gap: 1rem;
      font-size: 0.82rem;
      color: var(--blog-text-muted);
      flex-wrap: wrap;
    }
    .article-meta .sep { color: var(--blog-border); }

    /* ‚îÄ‚îÄ Content ‚îÄ‚îÄ */
    .article-layout {
      max-width: 760px;
      margin: 0 auto;
      padding: 2.5rem 1.5rem 4rem;
    }
    .article-body h2 {
      font-size: 1.4rem;
      font-weight: 700;
      color: var(--blog-text);
      margin: 2rem 0 0.75rem;
      padding-top: 0.5rem;
      border-top: 1px solid var(--blog-border);
    }
    .article-body h3 {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--blog-primary);
      margin: 1.5rem 0 0.5rem;
    }
    .article-body p { margin-bottom: 1rem; color: var(--blog-text); }
    .article-body ul, .article-body ol {
      padding-left: 1.5rem;
      margin-bottom: 1rem;
    }
    .article-body li { margin-bottom: 0.4rem; color: var(--blog-text); }
    .article-body strong { color: var(--blog-text); font-weight: 700; }
    .article-body em { color: var(--blog-text-muted); }
    .article-body a { color: var(--blog-primary); text-decoration: underline; }
    .article-body a:hover { color: var(--blog-primary-dark); }
    .article-body blockquote {
      border-left: 3px solid var(--blog-primary);
      background: rgba(14, 165, 233, 0.07);
      padding: 0.75rem 1.25rem;
      margin: 1.25rem 0;
      border-radius: 0 8px 8px 0;
      color: var(--blog-text);
    }
    .article-body code {
      background: var(--blog-surface);
      color: var(--blog-accent);
      padding: 0.15rem 0.4rem;
      border-radius: 4px;
      font-size: 0.875em;
    }
    .article-body pre {
      background: var(--blog-surface);
      padding: 1rem 1.25rem;
      border-radius: 8px;
      overflow-x: auto;
      margin-bottom: 1rem;
    }

    /* Tables */
    .article-body table {
      width: 100%;
      border-collapse: collapse;
      margin: 1.5rem 0;
      font-size: 0.9rem;
    }
    .article-body th {
      background: var(--blog-surface-light);
      color: var(--blog-primary);
      font-weight: 700;
      text-align: left;
      padding: 0.65rem 1rem;
      border: 1px solid var(--blog-border);
    }
    .article-body td {
      padding: 0.6rem 1rem;
      border: 1px solid var(--blog-border);
      color: var(--blog-text);
    }
    .article-body tr:nth-child(even) td { background: #f8fafc; }

    /* CTA block */
    .article-cta {
      margin-top: 2.5rem;
      background: linear-gradient(135deg, var(--blog-surface) 0%, rgba(14,165,233,0.1) 100%);
      border: 1px solid rgba(14, 165, 233, 0.25);
      border-radius: 12px;
      padding: 2rem;
      text-align: center;
    }
    .article-cta h3 {
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--blog-text);
      margin-bottom: 0.5rem;
    }
    .article-cta p { color: var(--blog-text-muted); margin-bottom: 1.25rem; }
    .article-cta .cta-btn {
      display: inline-block;
      background: #25d366;
      color: #fff;
      font-weight: 700;
      font-size: 0.95rem;
      padding: 0.75rem 1.75rem;
      border-radius: 8px;
      text-decoration: none;
      transition: transform 0.15s, box-shadow 0.15s;
    }
    .article-cta .cta-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(37, 211, 102, 0.3);
    }

    /* Footer */
    .blog-footer {
      border-top: 1px solid var(--blog-border);
      text-align: center;
      padding: 1.5rem;
      color: var(--blog-text-muted);
      font-size: 0.8rem;
    }
    .blog-footer a { color: var(--blog-primary); text-decoration: none; }

    @media (max-width: 600px) {
      .article-hero { padding: 2rem 1rem 1.75rem; }
      .article-layout { padding: 2rem 1rem 3rem; }
    }
  </style>
</head>
<body>
  <!-- GTM noscript -->
  <noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PSJ9FZVJ"
      height="0" width="0" style="display:none;visibility:hidden"></iframe>
  </noscript>

  <!-- Header -->
  <header class="blog-header">
    <a href="/" class="logo-link">
      <span class="brand-dot"></span>
      Grupo SAOM
    </a>
    <nav>
      <a href="/">Inicio</a>
      <a href="/blog/">Blog</a>
      <a href="/#contacto">Contacto</a>
      <a href="https://wa.me/529984128573?text=Hola%2C%20vi%20el%20blog%20y%20me%20interesa%20una%20cotizaci√≥n"
         target="_blank" rel="noopener" class="cta-btn">WhatsApp</a>
    </nav>
  </header>

  <!-- Article Hero -->
  <div class="article-hero">
    <div class="article-hero-inner">
      <nav class="breadcrumb" aria-label="breadcrumb">
        <a href="/">Inicio</a>
        <span>‚Ä∫</span>
        <a href="/blog/">Blog</a>
        <span>‚Ä∫</span>
        <span>{title}</span>
      </nav>
      <span class="article-category">{category}</span>
      <h1>{title}</h1>
      <p class="excerpt">{description}</p>
      {heroImage && (
        <div class="article-hero-img">
          <img src={heroImage} alt={title} loading="eager" fetchpriority="high" />
        </div>
      )}
      <div class="article-meta">
        <span>‚úçÔ∏è {author}</span>
        <span class="sep">¬∑</span>
        <time datetime={new Date(pubDate).toISOString()}>üìÖ {formattedDate}</time>
        {formattedUpdated && (
          <>
            <span class="sep">¬∑</span>
            <span>Actualizado: {formattedUpdated}</span>
          </>
        )}
      </div>
    </div>
  </div>

  <!-- Article Body -->
  <main class="article-layout">
    <article class="article-body">
      <slot />
    </article>

    <!-- CTA -->
    <div class="article-cta">
      <h3>¬øListo para proteger lo que m√°s importa?</h3>
      <p>Cotizaci√≥n gratuita y visita t√©cnica sin compromiso en Canc√∫n.</p>
      <a
        href="https://wa.me/529984128573?text=Hola%2C%20vi%20el%20blog%20y%20me%20interesa%20una%20cotizaci√≥n"
        target="_blank"
        rel="noopener"
        class="cta-btn"
        data-gtm-id="blog-article-cta-whatsapp"
      >
        üí¨ Cotizar por WhatsApp
      </a>
    </div>
  </main>

  <footer class="blog-footer">
    <p>¬© {new Date().getFullYear()} Grupo SAOM ‚Äî C√°maras de Seguridad en Canc√∫n |
      <a href="/">Inicio</a> ¬∑ <a href="/blog/">Blog</a> ¬∑ <a href="/#contacto">Contacto</a>
    </p>
  </footer>
</body>
</html>
