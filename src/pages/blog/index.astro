---
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog', ({ data }) => !data.draft))
  .sort((a, b) => new Date(b.data.pubDate).valueOf() - new Date(a.data.pubDate).valueOf());

const canonicalURL = 'https://videovigilancia.gruposaom.com.mx/blog/';

import '@fortawesome/fontawesome-svg-core/styles.css';
import { config } from '@fortawesome/fontawesome-svg-core';
config.autoAddCss = false;
---

<!DOCTYPE html>
<html lang="es-MX">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Blog de Seguridad y Videovigilancia en Canc√∫n | Grupo SAOM</title>

  <meta name="robots" content="index, follow" />
  <meta name="description" content="Gu√≠as, consejos y art√≠culos sobre c√°maras de seguridad, videovigilancia y sistemas CCTV para negocios y hogares en Canc√∫n, Quintana Roo." />

  <meta property="og:title" content="Blog de Seguridad y Videovigilancia en Canc√∫n | Grupo SAOM" />
  <meta property="og:description" content="Gu√≠as, consejos y art√≠culos sobre c√°maras de seguridad, videovigilancia y sistemas CCTV para negocios y hogares en Canc√∫n." />
  <meta property="og:url" content={canonicalURL} />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://videovigilancia.gruposaom.com.mx/og-image.jpg" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Blog de Seguridad y Videovigilancia | Grupo SAOM" />
  <meta name="twitter:description" content="Art√≠culos pr√°cticos sobre c√°maras de seguridad y videovigilancia en Canc√∫n." />

  <link rel="canonical" href={canonicalURL} />
  <link rel="alternate" hreflang="es-mx" href={canonicalURL} />
  <link rel="icon" href="/favicon.ico" type="image/x-icon" />
  <link rel="preload" href="/fonts/DMSans-Regular.ttf" as="font" type="font/ttf" crossorigin />

  <!-- Google Tag Manager -->
  <script is:inline>
    (function (w, d, s, l, i) {
      w[l] = w[l] || [];
      w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
      var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != "dataLayer" ? "&l=" + l : "";
      j.async = true;
      j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
      f.parentNode.insertBefore(j, f);
    })(window, document, "script", "dataLayer", "GTM-PSJ9FZVJ");
  </script>

  <!-- Blog List Schema -->
  <script type="application/ld+json" is:inline set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "Blog",
    "name": "Blog de Seguridad | Grupo SAOM",
    "url": canonicalURL,
    "description": "Gu√≠as y consejos sobre videovigilancia y c√°maras de seguridad en Canc√∫n.",
    "publisher": {
      "@type": "Organization",
      "name": "Grupo SAOM",
      "url": "https://videovigilancia.gruposaom.com.mx/"
    }
  })}></script>

  <!-- Breadcrumb -->
  <script type="application/ld+json" is:inline set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      { "@type": "ListItem", "position": 1, "name": "Inicio", "item": "https://videovigilancia.gruposaom.com.mx/" },
      { "@type": "ListItem", "position": 2, "name": "Blog", "item": canonicalURL }
    ]
  })}></script>

  <style>
    :root {
      --c-bg: #ffffff;
      --c-surface: #f8fafc;
      --c-surface2: #f1f5f9;
      --c-primary: #0284c7;
      --c-primary-dark: #0369a1;
      --c-text: #1e293b;
      --c-muted: #64748b;
      --c-border: #e2e8f0;
      --c-accent: #d97706;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--c-bg);
      color: var(--c-text);
      line-height: 1.6;
    }

    /* Header */
    .blog-header {
      position: sticky; top: 0; z-index: 100;
      background: rgba(255, 255, 255, 0.92);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--c-border);
      padding: 0.75rem 1.5rem;
      display: flex; align-items: center; justify-content: space-between; gap: 1rem;
    }
    .logo-link {
      display: flex; align-items: center; gap: 0.5rem;
      text-decoration: none; color: var(--c-text);
      font-weight: 700; font-size: 1rem;
    }
    .brand-dot { width: 8px; height: 8px; background: var(--c-primary); border-radius: 50%; }
    .blog-header nav { display: flex; gap: 1rem; align-items: center; flex-wrap: wrap; }
    .blog-header nav a { color: var(--c-muted); text-decoration: none; font-size: 0.875rem; transition: color 0.2s; }
    .blog-header nav a:hover { color: var(--c-text); }
    .blog-header .cta-btn {
      background: var(--c-primary); color: #fff !important;
      padding: 0.4rem 1rem; border-radius: 6px;
      font-size: 0.8rem; font-weight: 600;
      transition: background 0.2s, transform 0.15s;
    }
    .blog-header .cta-btn:hover { background: var(--c-primary-dark) !important; transform: translateY(-1px); }

    /* Hero section */
    .blog-hero {
      background: linear-gradient(160deg, #f0f9ff 0%, #ffffff 55%);
      border-bottom: 1px solid var(--c-border);
      text-align: center;
      padding: 4rem 1.5rem 3rem;
    }
    .blog-hero .tag {
      display: inline-flex; align-items: center; gap: 0.4rem;
      background: #f0f9ff;
      color: var(--c-primary);
      border: 1px solid #e0f2fe;
      font-size: 0.75rem; font-weight: 600;
      letter-spacing: 0.06em; text-transform: uppercase;
      padding: 0.3rem 0.9rem; border-radius: 99px;
      margin-bottom: 1.25rem;
    }
    .blog-hero h1 { font-size: clamp(1.75rem, 4vw, 2.8rem); font-weight: 800; line-height: 1.2; margin-bottom: 0.85rem; }
    .blog-hero p { color: var(--c-muted); font-size: 1.05rem; max-width: 560px; margin: 0 auto; }

    /* Grid */
    .blog-grid-wrapper { max-width: 1100px; margin: 0 auto; padding: 3rem 1.5rem 5rem; }
    .blog-grid-header {
      display: flex; align-items: baseline; justify-content: space-between;
      margin-bottom: 2rem; flex-wrap: wrap; gap: 0.5rem;
    }
    .blog-grid-header h2 { font-size: 1.15rem; font-weight: 700; }
    .blog-grid-header span { font-size: 0.85rem; color: var(--c-muted); }

    .blog-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(310px, 1fr));
      gap: 1.5rem;
    }

    /* Card */
    .blog-card {
      background: var(--c-bg);
      border: 1px solid var(--c-border);
      border-radius: 14px;
      overflow: hidden;
      text-decoration: none;
      color: inherit;
      display: flex; flex-direction: column;
      transition: transform 0.2s, border-color 0.2s, box-shadow 0.2s;
    }
    .blog-card:hover {
      transform: translateY(-4px);
      border-color: var(--c-primary);
      box-shadow: 0 12px 32px rgba(0,0,0,0.05);
    }
    .card-thumb {
      aspect-ratio: 16/9;
      background: #f1f5f9;
      display: flex; align-items: center; justify-content: center;
      font-size: 2.5rem;
      border-bottom: 1px solid var(--c-border);
      overflow: hidden;
    }
    .card-thumb img { width: 100%; height: 100%; object-fit: cover; }
    .card-body { padding: 1.25rem; flex: 1; display: flex; flex-direction: column; gap: 0.5rem; }
    .card-cat {
      font-size: 0.72rem; font-weight: 600;
      letter-spacing: 0.05em; text-transform: uppercase;
      color: var(--c-primary);
    }
    .card-body h2 { font-size: 1rem; font-weight: 700; line-height: 1.4; color: var(--c-text); }
    .card-body p { font-size: 0.875rem; color: var(--c-muted); line-height: 1.5; flex: 1; }
    .card-meta {
      display: flex; align-items: center; justify-content: space-between;
      font-size: 0.75rem; color: var(--c-muted);
      padding-top: 0.75rem;
      border-top: 1px solid var(--c-border);
      margin-top: auto;
    }
    .card-meta .read-more {
      color: var(--c-primary); font-weight: 600;
      display: flex; align-items: center; gap: 0.25rem;
    }

    /* Footer */
    .blog-footer {
      border-top: 1px solid var(--c-border);
      text-align: center; padding: 1.5rem;
      color: var(--c-muted); font-size: 0.8rem;
    }
    .blog-footer a { color: var(--c-primary); text-decoration: none; }

    @media (max-width: 600px) {
      .blog-hero { padding: 2.5rem 1rem 2rem; }
      .blog-grid-wrapper { padding: 2rem 1rem 3.5rem; }
    }
  </style>
</head>
<body>
  <noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PSJ9FZVJ"
      height="0" width="0" style="display:none;visibility:hidden"></iframe>
  </noscript>

  <header class="blog-header">
    <a href="/" class="logo-link">
      <span class="brand-dot"></span>
      Grupo SAOM
    </a>
    <nav>
      <a href="/">Inicio</a>
      <a href="/blog/" aria-current="page">Blog</a>
      <a href="/#contacto">Contacto</a>
      <a href="https://wa.me/529984128573?text=Hola%2C%20vi%20el%20blog%20y%20me%20interesa%20una%20cotizaci√≥n"
         target="_blank" rel="noopener" class="cta-btn" data-gtm-id="blog-index-cta-whatsapp">WhatsApp</a>
    </nav>
  </header>

  <section class="blog-hero">
    <p class="tag">üì∑ Videovigilancia &amp; Seguridad</p>
    <h1>Blog de C√°maras de Seguridad en Canc√∫n</h1>
    <p>Gu√≠as pr√°cticas, comparativas y consejos para proteger tu negocio o hogar con sistemas de videovigilancia.</p>
  </section>

  <main class="blog-grid-wrapper">
    <div class="blog-grid-header">
      <h2>Art√≠culos recientes</h2>
      <span>{posts.length} art√≠culos</span>
    </div>

    <nav class="blog-grid" aria-label="Lista de art√≠culos">
      {posts.map((post) => {
        const emoji = {
          'Videovigilancia para Negocios': 'üè¨',
          'Gu√≠as de Compra': 'üõí',
          'Mantenimiento': 'üîß',
          'Seguridad del Hogar': 'üè†',
          'Gu√≠as Pr√°cticas': 'üì±',
          'Tecnolog√≠a Avanzada': 'üß†',
          'Soluciones Corporativas': 'üè¢',
          'Control de Acceso': 'üöó',
          'Retail Intelligence': 'üìä',
          'Seguridad Integral': 'üîê',
          'Tecnolog√≠a': '‚òÅÔ∏è',
          'Legal & Privacidad': 'üìú',
        }[post.data.category] ?? 'üì∑';

        const dateStr = new Date(post.data.pubDate).toLocaleDateString('es-MX', {
          year: 'numeric', month: 'short', day: 'numeric'
        });

        return (
          <a href={`/blog/${post.slug}/`} class="blog-card" data-gtm-id={`blog-card-${post.slug}`}>
            <div class="card-thumb">
              {post.data.heroImage
                ? <img src={post.data.heroImage} alt={post.data.title} loading="lazy" />
                : <span>{emoji}</span>
              }
            </div>
            <div class="card-body">
              <span class="card-cat">{post.data.category}</span>
              <h2>{post.data.title}</h2>
              <p>{post.data.description}</p>
              <div class="card-meta">
                <time datetime={new Date(post.data.pubDate).toISOString()}>üìÖ {dateStr}</time>
                <span class="read-more">Leer m√°s ‚Üí</span>
              </div>
            </div>
          </a>
        );
      })}
    </nav>
  </main>

  <footer class="blog-footer">
    <p>¬© {new Date().getFullYear()} Grupo SAOM ‚Äî C√°maras de Seguridad en Canc√∫n |
      <a href="/">Inicio</a> ¬∑ <a href="/blog/">Blog</a> ¬∑ <a href="/#contacto">Contacto</a>
    </p>
  </footer>
</body>
</html>
